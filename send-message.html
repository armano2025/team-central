async function submitMessage() {
  const password = document.getElementById("password").value;
  if (password !== "Admin1948") {
    alert("סיסמה שגויה");
    return;
  }

  const message = document.getElementById("message").value;

  const filters = {};
  const fields = ["Day", "Subject", "Teacher", "Grade", "Status", "Subscription Type"];
  fields.forEach(field => {
    const selected = Array.from(document.getElementById(field).selectedOptions).map(o => o.value);
    filters[field] = selected;
  });

  const payload = {
    filters: filters,
    message: message
  };

  try {
    const response = await fetch("https://hook.eu2.make.com/2b96fig78b9txx26dlj5a0rhlrj2pvho", {
      method: "POST",
      body: JSON.stringify(payload),
      headers: {
        "Content-Type": "application/json"
      }
    });

    if (response.ok) {
      alert("הבקשה נשלחה בהצלחה!");
    } else {
      alert("קרתה שגיאה בשליחה");
    }
  } catch (error) {
    alert("שגיאה כללית: " + error.message);
  }
}
