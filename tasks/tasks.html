<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ניהול משימות – לוח ראשי</title>

  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="./tasks.css" />
  <meta name="theme-color" content="#2563eb" />
</head>
<body>

  <!-- פס טעינה עליון (נשלט ע"י JS) -->
  <div id="topLoader" class="top-loader" hidden></div>

  <!-- חזרה לאדמין -->
  <a class="back-link" href="../admin.html">← חזרה למסך אדמין</a>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-content">
      <h2>לוח המשימות</h2>
      <p>סקירה מהירה של היקף העבודה וניווט מהיר לכל הרשימות.</p>

      <!-- ספינר בתוך ההירו -->
      <div id="heroSpinner" class="hero-spinner" hidden aria-live="polite" aria-label="טוען נתונים">
        <span class="hero-dot"></span><span class="hero-dot"></span><span class="hero-dot"></span>
      </div>

      <!-- סטטיסטיקות -->
      <div class="stats" id="heroStats" hidden>
        <a class="stat-link" id="linkTodo" href="./owner.html?owner=all&status=todo" data-show-spinner>
          <span class="stat-pill">לטיפול: <strong id="statTodo">–</strong></span>
        </a>
        <a class="stat-link" id="linkInp" href="./owner.html?owner=all&status=inp" data-show-spinner>
          <span class="stat-pill">בתהליך: <strong id="statInp">–</strong></span>
        </a>
      </div>

      <!-- פעולות -->
      <div class="actions" style="margin-top:10px;">
        <a class="btn orange" id="btnAll" href="./owner.html?owner=all" data-show-spinner>רשימת כל המשימות</a>
        <a class="btn orange" href="https://docs.google.com/spreadsheets/d/1vQGA0aeXj9yncK2ZbuYZjrvQgPdpp7qN5FCxWBSAUd4/edit?usp=drivesdk" target="_blank" rel="noopener">
          פתיחה בגוגל שיטס
        </a>
      </div>
    </div>
  </header>

  <!-- בועות -->
  <main class="container">
    <section id="bubbles" aria-label="ביצועים לפי מטפל">
      <div class="bubbles-grid">
        <a class="bubble big" href="./owner.html?owner=unassigned" data-show-spinner>
          <div class="bubble-title">לא משויך</div>
          <div class="bubble-stats">
            <div>לטיפול: <span id="u_todo">0</span></div>
            <div>בתהליך: <span id="u_inp">0</span></div>
          </div>
        </a>

        <a class="bubble b1" href="./owner.html?owner=חן" data-show-spinner>
          <div class="bubble-title">חן</div>
          <div class="bubble-stats">
            <div>לטיפול: <span id="chen_todo">0</span></div>
            <div>בתהליך: <span id="chen_inp">0</span></div>
          </div>
        </a>

        <a class="bubble b2" href="./owner.html?owner=תמרה" data-show-spinner>
          <div class="bubble-title">תמרה</div>
          <div class="bubble-stats">
            <div>לטיפול: <span id="tam_todo">0</span></div>
            <div>בתהליך: <span id="tam_inp">0</span></div>
          </div>
        </a>

        <a class="bubble b3" href="./owner.html?owner=בלה" data-show-spinner>
          <div class="bubble-title">בלה</div>
          <div class="bubble-stats">
            <div>לטיפול: <span id="bel_todo">0</span></div>
            <div>בתהליך: <span id="bel_inp">0</span></div>
          </div>
        </a>

        <a class="bubble b4" href="./owner.html?owner=ליאור" data-show-spinner>
          <div class="bubble-title">ליאור</div>
          <div class="bubble-stats">
            <div>לטיפול: <span id="lio_todo">0</span></div>
            <div>בתהליך: <span id="lio_inp">0</span></div>
          </div>
        </a>

        <a class="bubble b5" href="./owner.html?owner=נטע" data-show-spinner>
          <div class="bubble-title">נטע</div>
          <div class="bubble-stats">
            <div>לטיפול: <span id="net_todo">0</span></div>
            <div>בתהליך: <span id="net_inp">0</span></div>
          </div>
        </a>
      </div>
    </section>
  </main>

  <script src="./tasks.js?v=9"></script>

  <!-- מראה ספינר בעת ניווט -->
  <script>
    const heroSpinner = document.getElementById('heroSpinner');
    document.querySelectorAll('[data-show-spinner]').forEach(a=>{
      a.addEventListener('click', () => { if (heroSpinner) heroSpinner.hidden = false; });
    });
  </script>
</body>
</html>